# generated by cabal-rpm-2.0.7
# https://docs.fedoraproject.org/en-US/packaging-guidelines/Haskell/

%bcond_with tests

Name:           rhbzquery
Version:        0.4.3
Release:        1%{?dist}
Summary:        Bugzilla query tool

License:        GPLv2+
Url:            https://hackage.haskell.org/package/%{name}
# Begin cabal-rpm sources:
Source0:        https://hackage.haskell.org/package/%{name}-%{version}/%{name}-%{version}.tar.gz
# End cabal-rpm sources

# Begin cabal-rpm deps:
BuildRequires:  ghc-Cabal-devel
BuildRequires:  ghc-rpm-macros
BuildRequires:  ghc-base-static
BuildRequires:  ghc-bytestring-static
BuildRequires:  ghc-config-ini-static
BuildRequires:  ghc-directory-static
BuildRequires:  ghc-email-validate-static
BuildRequires:  ghc-extra-static
BuildRequires:  ghc-filepath-static
BuildRequires:  ghc-http-types-static
BuildRequires:  ghc-optparse-applicative-static
BuildRequires:  ghc-simple-cmd-static
BuildRequires:  ghc-simple-cmd-args-static
BuildRequires:  ghc-text-static
# End cabal-rpm deps
BuildRequires:  help2man

%description
A CLI tool for creating bugzilla queries for bugzilla.redhat.com.


%prep
# Begin cabal-rpm setup:
%setup -q
# End cabal-rpm setup


%build
# Begin cabal-rpm build:
%ghc_bin_build
# End cabal-rpm build


%install
# Begin cabal-rpm install
%ghc_bin_install
mkdir -p %{buildroot}%{_datadir}/bash-completion/completions/
%{buildroot}%{_bindir}/%{name} --bash-completion-script %{name} > %{buildroot}%{_datadir}/bash-completion/completions/%{name}
# End cabal-rpm install

help2man --no-info %{buildroot}%{_bindir}/%{name} > %{name}.man
install -pm 644 -D %{name}.man %{buildroot}%{_mandir}/man1/%{name}.1


%check
%cabal_test


%files
# Begin cabal-rpm files:
%license LICENSE
%doc ChangeLog.md README.md
%{_bindir}/%{name}
%{_datadir}/bash-completion/completions/%{name}
# End cabal-rpm files
%{_mandir}/man1/%{name}.1*


%changelog
* Mon Feb 15 2021 Jens Petersen <petersen@redhat.com> - 0.4.3-1
- support status with '<STATE' and '>STATE'
- Bugzilla uses 'notequals' (not 'notequal')
- fix missing EPEL version prefix

* Wed Jan 27 2021 Fedora Release Engineering <releng@fedoraproject.org> - 0.4.2-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_34_Mass_Rebuild

* Fri Jan  8 18:54:42 +08 2021 Jens Petersen <petersen@redhat.com> - 0.4.2-1
- new --query command
- new --server option

* Thu Dec 17 2020 Jens Petersen <petersen@redhat.com> - 0.4.1-1
- change license from BSD to GPLv2+
- set no stdout buffering (#1906493)
- generate basic manpage with help2man

* Sat Dec 12 2020 Jens Petersen <petersen@redhat.com> - 0.4-1
- add --list-operators
- rename longer operators to be easier

* Thu Dec 10 2020 Jens Petersen <petersen@redhat.com> - 0.3-1
- add --list-fields option
- field validation: error for unknown fields
- map content' field '~'/'!~' to matches/notmatches

* Wed Dec  9 2020 Jens Petersen <petersen@redhat.com> - 0.2-1
- support most search types (regexp, allwords, etc and negatives)

* Fri Dec  4 23:29:02 +08 2020 Jens Petersen <petersen@redhat.com> - 0.1.1-1
- --file a bug
- --help: do not format FIELDS

* Wed Dec  2 2020 Jens Petersen <petersen@redhat.com> - 0.1.0-1
- initial package
