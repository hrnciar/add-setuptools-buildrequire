# Generated by go2rpm
%bcond_without check

# https://github.com/afex/hystrix-go
%global goipath         github.com/afex/hystrix-go
%global commit          fa1af6a1f4f56e0e50d427fe901cd604d8c6fb8a

%gometa

%global common_description %{expand:
Hystrix is a latency and fault tolerance library designed to isolate points of
access to remote systems, services and 3rd party libraries, stop cascading
failure and enable resilience in complex distributed systems where failure is
inevitable.}

%global golicenses      LICENSE
%global godocs          README.md

Name:           %{goname}
Version:        0
Release:        0.6%{?dist}
Summary:        Netflix's hystrix latency and fault tolerance library, for go

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}
# Make hystrix compaible with github.com/cactus/go-statsd-client v5
Patch0:         0001-Make-compatible-with-statsd-5.0.0.patch

BuildRequires:  golang(github.com/cactus/go-statsd-client/statsd)
BuildRequires:  golang(github.com/DataDog/datadog-go/statsd)
BuildRequires:  golang(github.com/rcrowley/go-metrics)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/smartystreets/goconvey/convey)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
%patch0 -p1

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
* Tue Jan 26 2021 Fedora Release Engineering <releng@fedoraproject.org> - 0-0.6
- Rebuilt for https://fedoraproject.org/wiki/Fedora_34_Mass_Rebuild


* Sat Jan 23 16:35:36 CET 2021 Robert-André Mauchin <zebob.m@gmail.com> - 0-0.5.20190622gitfa1af6a
- Fix FTBFS

* Mon Jul 27 2020 Fedora Release Engineering <releng@fedoraproject.org> - 0-0.4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_33_Mass_Rebuild

* Tue Jan 28 2020 Fedora Release Engineering <releng@fedoraproject.org> - 0-0.3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_32_Mass_Rebuild

* Thu Jul 25 2019 Fedora Release Engineering <releng@fedoraproject.org> - 0-0.2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_31_Mass_Rebuild

* Thu Apr 18 18:57:23 CEST 2019 Robert-André Mauchin <zebob.m@gmail.com> - 0-0.1.20190622gitfa1af6a
- Initial package
